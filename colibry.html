<head>
  <title>Colibry</title>
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  </head>

<template name="main">
      {{> yield}}
     {{> NavBar}} 
    <p class="text-right">Copyright &copy; Colibry, 2015-2016.</p>
</template>

<template name="register">
{{> carousel}}
<div style="position: absolute; top: 40%;">
  
     <div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="row">
      <div class="col-xs-2 col-sm-3">
      </div>
      <div class="col-xs-6 col-sm-9">

      <ul class="nav nav-pills nav-justified">
  <li role="presentation" ><a href="{{pathFor route='login'}}">Login</a></li>
  <li role="presentation" class="active"><a href="{{pathFor route='register'}}">Register</a></li>
</ul>
<form class="register">
    <div class="input-group">
      <span class="input-group-addon" id="basic-addon1">@</span>
    <input type="email" class="form-control" placeholder="E-mail" aria-describedby="basic-addon1" name="email">
        </div><!-- /input-group -->

    <div class="input-group">
      <input type="password" name="password" class="form-control" placeholder="password">
      <span class="input-group-btn">
        <button class="btn btn-default" value="Register" type="submit">Register !</button>
      </span>
    </div><!-- /input-group -->
     </form>
   </div>  
    </div>
  </div><!-- /.col-lg-6 -->
</div>
</div><!-- /.row -->

</template>

<template name="login">
   {{> carousel}}
<div style="position: absolute; top: 40%;">
  
     <div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="row">
      <div class="col-xs-2 col-sm-3">
      </div>
      <div class="col-xs-6 col-sm-9">

      <ul class="nav nav-pills nav-justified">
  <li role="presentation" class="active"><a href="{{pathFor route='login'}}">Login</a></li>
  <li role="presentation"><a href="{{pathFor route='register'}}">Register</a></li>
</ul>
<form class="login">
    <div class="input-group">
      <span class="input-group-addon" id="basic-addon1">@</span>
    <input type="email" class="form-control" placeholder="E-mail" aria-describedby="basic-addon1" name="email">
        </div><!-- /input-group -->

    <div class="input-group">
      <input type="password" name="password" class="form-control" placeholder="password">
      <span class="input-group-btn">
        <button class="btn btn-default" value="Login" type="submit">Login !</button>
      </span>
    </div><!-- /input-group -->
     </form>
   </div>  
    </div>
  </div><!-- /.col-lg-6 -->
</div>
</div><!-- /.row -->
</template>

<template name="carousel">
  <div id="carousel-login-register" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#carousel-login-register" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-login-register" data-slide-to="1"></li>
    <li data-target="#carousel-login-register" data-slide-to="2"></li>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="/Carousel1.jpg" alt="Create your collaborative library !">
      <div class="carousel-caption">
        Create your collaborative library !
      </div>
    </div>
   
    <div class="item">
      <img src="/Carousel2.jpg" alt="Share your books">
      <div class="carousel-caption">
        Share your books !
      </div>
    </div>
    
    <div class="item">
      <img src="/Carousel3.jpg" alt="Read">
      <div class="carousel-caption">
        Read !
      </div>
    </div>

  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel-login-register" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
</template>

<template name="borrow">
      <h2>En construction !</h2>
  
</template>

<template name="lend">
  <body>
  <div class="container-fluid">
  <h5>MY COLLABORATIVE LIBRARY</h5>
  {{> Alert}}
  <div class="row">
  <div class="col-xs-12 col-sm-6 col-md-8">{{> DisplayBooks}}
  </div>
  <div class="center-block">
  <div class="col-xs-6 col-md-4"> {{> GSearch}} {{> DisplaySelectedBook}}
    </div>
  </div>
  </div>
  </div>
</body>
</template>


<template name="DisplaySelectedBook">
{{#if currentUser}}
	 {{#each MySelectedBook}}

<div class="thumbnail">
      <img class="ThumbBooks" src="{{thumb}}" width="100" height="140">
      <div class="caption">
        <h3>{{Title}} by {{Authors}}</h3>
        <p>{{Snippet}}</p>
        <p class="text-center">
        <p><a class="btn btn-danger EraseBook" role="button"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Remove</a> 
        <a href="#" class="btn btn-success" role="button"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>Add</a></p>
     	</p>
      </div>
    </div>

	{{/each}}
{{/if}}
</template>







<template name="DisplayBooks">

{{#if currentUser}}
  

  <div id="1" class="panel panel-success dropzone">
    <div class="panel-heading">
      <h4 class="panel-title">
        Books available for lending <span class="badge">{{MyPublicBooks.count}}</span>
      </h4>
    <div class="panel-body">
      	<div class="row">
      	 {{#each MyPublicBooks}}
        <!--- ESSAI SANS TAILLE 
        AVANT : <div id="drag" class="draggable drag-drop">
          <a class="img-thumbnail img-responsive">
           <img class="ThumbBooks" src="{{thumb}}" alt={{Title}} height="110">
          </a>
        </div>-->
    			<a class="img-thumbnail img-responsive">
     			 <img class="ThumbBooks draggable drag-drop" src="{{thumb}}" alt={{Title}} height="110">
    			</a>
  			{{/each}}	
  		
		</div>
	
      </div>
    </div>
  </div>


  <div id="0" class="dropzone panel panel-warning">
    <div class="panel-heading">
      <h4 class="panel-title">
          Private books, unavailable for lending <span class="badge">    {{MyPrivateBooks.count}}</span>
	 </h4>
    <div class="panel-body">
        <div class="row">
        {{#if MyPrivateBooks.count}}
      	 {{#each MyPrivateBooks}}
    			<a class="img-thumbnail img-responsive">
           <img class="ThumbBooks draggable drag-drop" src="{{thumb}}" alt={{Title}} height="110">
          </a>
        {{/each}} 
        {{else}}
          If you'd like a book to be private onbly, drag & drop it here
          {{/if}}
    </div>
      </div>
    </div>
  </div>

  <div id="2" class="dropzone panel panel-danger">
    <div class="panel-heading">
      <h4 class="panel-title">
          Lent books <span class="badge">    {{MyLendedBooks.count}}
		</span>
     </h4>
    <div class="panel-body">
        <div class="row">
      	 {{#if MyLendedBooks.count}}
         {{#each MyLendedBooks}}
    			<a class="img-thumbnail img-responsive">
           <img class="ThumbBooks draggable drag-drop" src="{{thumb}}" alt={{Title}} height="110">
          </a>
        {{/each}} 
        {{else}}
         If you'd like to signal that one of your book has been lent, drag & drop it here
         {{/if}}
    </div>
      </div>
    </div>
  </div>
{{/if}}
</template>





<template name="NavBar">
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="{{pathFor route='lend'}}">Colibry</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="{{pathFor route='lend'}}">Lend<span class="sr-only">(current)</span></a></li>
        <li><a href="{{pathFor route='borrow'}}">Borrow</a></li>
        

      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="ISBN, title, author, theme, etc.">
        </div>
        <button type="submit" class="btn btn-default">Borrow</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        {{#if currentUser}}
        <li><a href="#" class="logout">Logout</a></li>
       {{else}}
        <li><a href="{{pathFor route='login'}}">Login / Register</a></li>
        {{/if}} 
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


</template>



<template name="Alert">
{{#if currentUser}}
 {{#if Hasabookbeenadded 'oui'}}
<div class="alert alert-success" role="alert">Book added to your account
<button type="button" class="close closealert" data-dismiss="alert" aria-label="Close">
  <span aria-hidden="true">&times;</span>
  </button>
  </div>
  {{/if}}

{{#if Hasabookbeenadded 'error'}}
<div class="alert alert-danger" role="alert">
  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  <span class="sr-only">Error:</span>
  This book is already in your library !
  <button type="button" class="close closealert" data-dismiss="alert" aria-label="Close">
  <span aria-hidden="true">&times;</span>
  </button>
</div>
	{{/if}}


{{#if Hasabookbeenadded 'removed'}}
<div class="alert alert-danger" role="alert">
  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  <span class="sr-only">Error:</span>
  This book has been removed from your library.
  <button type="button" class="close closealert" data-dismiss="alert" aria-label="Close">
  <span aria-hidden="true">&times;</span>
  </button>
</div>
	{{/if}}
	{{/if}}
</template>



<template name="GSearch">
{{#if currentUser}}

 <form>
    <div class="input-group">
      <input type="text" class="form-control" name="query" placeholder="ISBN, title, author, theme, etc.">
      <span class="input-group-btn">
        <button class="btn btn-default" type="submit">
              <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
	Add to my library</button>
      </span>
    </div><!-- /input-group -->
  	

  </form>
<br> 
{{#if ActualGSearch}}
  {{#if searching}}
    <p>Searching...</p>
  {{else}}
    {{#if GBOOKSFIND.count}}
      <hr>  
      <table>
        {{#each GBOOKSFIND}}
          {{> DisplaySearchGbook}}
        {{/each}}
      </table>
    {{/if}}
  {{/if}}
  {{/if}}
  {{/if}}
</template>

<template name="DisplaySearchGbook">  
  <tr>
    <td class="image Addthisbook"><img src="{{thumb}}">
	</td>
    <blockquote>
	<strong>{{title}}</strong> by {{authors}}
	<small>{{snippet}}</small>
	{{averageRating}} / 5
    </blockquote>

	<button type="button" id="myButton" data-loading-text="Loading..." class="Addthisbook btn btn-primary" autocomplete="off">
  			Add to my Library
		</button>

		<script>
  		$('#myButton').on('click', function () {
    	var $btn = $(this).button('loading')
    	// business logic...
    	$btn.button('reset')
  		})
		</script>

	 </tr>
	 <br>
	 
</template>  




